(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{14584:(e,s,t)=>{Promise.resolve().then(t.bind(t,99287))},99287:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>M});var a=t(95155),r=t(12115);let l=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"w-full overflow-auto",children:(0,a.jsx)("table",{className:"w-full caption-bottom text-sm border border-gray-300 ".concat(t),children:s})})},n=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("thead",{className:"bg-gray-200 text-gray-700 sticky top-0 ".concat(t),children:s})},c=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("tbody",{className:"divide-y divide-gray-300 odd:bg-gray-100 even:bg-white ".concat(t),children:s})},i=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("tr",{className:"border-b transition-colors hover:bg-gray-50 ".concat(t),children:s})},o=e=>{let{children:s,className:t="",onClick:r}=e;return(0,a.jsx)("th",{onClick:r,className:"h-12 px-4 text-left align-middle font-medium text-gray-600 bg-gray-200 ".concat(r?"cursor-pointer hover:bg-gray-300":""," ").concat(t),children:s})},d=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("td",{className:"p-4 align-middle text-gray-700 ".concat(t),children:s})},h=e=>{let{value:s,onValueChange:t,defaultValue:l,children:n,className:c=""}=e,[i,o]=(0,r.useState)(l||s),d=e=>{"function"==typeof t?t(e):o(e)},h=s||i;return(0,a.jsx)("div",{className:c,children:r.Children.map(n,e=>r.isValidElement(e)?r.cloneElement(e,{value:h,onValueChange:d}):e)})},x=e=>{let{children:s,value:t,onValueChange:l,className:n=""}=e;return(0,a.jsx)("div",{className:"inline-flex h-10 items-center justify-center rounded-md bg-gray-100 p-1 ".concat(n),children:r.Children.map(s,e=>r.isValidElement(e)?r.cloneElement(e,{value:t,onValueChange:l}):e)})},m=e=>{let{value:s,triggerValue:t,children:r,onValueChange:l,className:n=""}=e;return(0,a.jsx)("button",{className:"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all\n      ".concat(s===t?"bg-white text-black shadow-sm":"text-gray-600 hover:text-black"," ").concat(n),onClick:()=>{"function"==typeof l&&l(t)},children:r})},g=e=>{let{value:s,triggerValue:t,children:r,className:l=""}=e;return s!==t?null:(0,a.jsx)("div",{className:"mt-2 ".concat(l),children:r})},j=()=>{let[e,s]=(0,r.useState)(!0),[t,j]=(0,r.useState)({seasonStats:[],goalStats:[],formData:[]}),[u,p]=(0,r.useState)("performance"),y=()=>{let e=new Date(new Date().setFullYear(new Date().getFullYear())),s=e.getFullYear(),t=6>e.getMonth();return{year:s,half:t?1:2,startDate:t?"".concat(s,"-01-01"):"".concat(s,"-07-01"),endDate:t?"".concat(s,"-06-30"):"".concat(s,"-12-31"),description:"".concat(t?"First":"Second"," Half ").concat(s)}};(0,r.useEffect)(()=>{(async()=>{try{let e=y();console.log("Current period:",e);let t=await fetch("/api/stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:e.startDate,endDate:e.endDate})});console.log("API Response:",t.status);let a=await t.json();console.log("API Data:",a),a.data?j(a.data):console.error("No data received from API"),s(!1)}catch(e){console.error("Error fetching stats:",e),s(!1)}})()},[]);let f=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Points Leaderboard"}),(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{className:"min-w-[150px] whitespace-nowrap",children:"Player"}),(0,a.jsx)(o,{className:"text-center",children:"P"}),(0,a.jsx)(o,{className:"text-center",children:"W"}),(0,a.jsx)(o,{className:"text-center",children:"D"}),(0,a.jsx)(o,{className:"text-center",children:"L"}),(0,a.jsx)(o,{className:"text-center",children:"Goals"}),(0,a.jsx)(o,{className:"text-center",children:"Heavy W"}),(0,a.jsx)(o,{className:"text-center",children:"Heavy L"}),(0,a.jsx)(o,{className:"text-center",children:"Clean Sheet"}),(0,a.jsx)(o,{className:"text-center",children:"Win %"}),(0,a.jsx)(o,{className:"text-center",children:"Points"}),(0,a.jsx)(o,{children:"Last 5"})]})}),(0,a.jsx)(c,{children:t.seasonStats.map((e,s)=>{var r,l;let n=(null===(l=t.formData.find(s=>s.name===e.name))||void 0===l?void 0:null===(r=l.last_5_games)||void 0===r?void 0:r.split(", "))||[],c=e.games_played-e.wins-e.draws;return(0,a.jsxs)(i,{children:[(0,a.jsx)(d,{className:"font-medium whitespace-nowrap",children:e.name}),(0,a.jsx)(d,{className:"text-center",children:e.games_played}),(0,a.jsx)(d,{className:"text-center bg-green-".concat(e.wins>=10?"600":e.wins>=7?"500":e.wins>=4?"400":e.wins>=1?"300":"200"),children:e.wins}),(0,a.jsx)(d,{className:"text-center",children:e.draws}),(0,a.jsx)(d,{className:"text-center bg-red-".concat(c>=10?"600":c>=7?"500":c>=4?"400":c>=1?"300":"200"),children:c}),(0,a.jsx)(d,{className:"text-center",children:e.goals}),(0,a.jsx)(d,{className:"text-center bg-green-".concat(e.heavy_wins>=5?"600":e.heavy_wins>=3?"500":e.heavy_wins>=1?"400":"200"),children:e.heavy_wins}),(0,a.jsx)(d,{className:"text-center bg-red-".concat(e.heavy_losses>=5?"600":e.heavy_losses>=3?"500":e.heavy_losses>=1?"400":"200"),children:e.heavy_losses}),(0,a.jsx)(d,{className:"text-center bg-green-".concat(e.clean_sheets>=5?"600":e.clean_sheets>=3?"500":e.clean_sheets>=1?"400":"200"),children:e.clean_sheets}),(0,a.jsxs)(d,{className:"text-center",children:[e.win_percentage,"%"]}),(0,a.jsx)(d,{className:"text-center font-bold",children:e.fantasy_points}),(0,a.jsx)(d,{children:(0,a.jsx)("div",{className:"flex gap-1",children:n.map((e,s)=>(0,a.jsx)("span",{className:"inline-block w-6 h-6 text-center rounded ".concat(e.includes("W")?"bg-green-500":"D"===e?"bg-yellow-500":"bg-red-500"," text-white"),children:e.replace("H","")},s))})})]},s)})})]})]}),N=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Goalscoring Leaderboard"}),(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{className:"min-w-[150px] whitespace-nowrap",children:"Player"}),(0,a.jsx)(o,{className:"text-center",children:"Goals"}),(0,a.jsx)(o,{className:"text-center",children:"MPG"}),(0,a.jsx)(o,{className:"text-center w-48",children:"Last 5"})]})}),(0,a.jsx)(c,{children:t.goalStats.map((e,s)=>{var r;return(0,a.jsxs)(i,{children:[(0,a.jsx)(d,{className:"font-medium whitespace-nowrap",children:e.name}),(0,a.jsx)(d,{className:"text-center",children:e.total_goals}),(0,a.jsx)(d,{className:"text-center ".concat(e.minutes_per_goal<=60?"bg-green-600":e.minutes_per_goal<=90?"bg-green-500":e.minutes_per_goal<=120?"bg-green-300":""),children:e.minutes_per_goal}),(0,a.jsx)(d,{children:(0,a.jsx)("div",{className:"flex gap-1",children:null===(r=e.last_five_games)||void 0===r?void 0:r.split(",").map((e,s)=>{let r=parseInt(e),l=Math.max(...t.goalStats.map(e=>e.max_goals_in_game));return(0,a.jsx)("span",{className:"inline-block w-6 h-6 text-center rounded ".concat(0===r?"bg-gray-200":r===l?"bg-yellow-500":r===l-1?"bg-yellow-400":r===l-2?"bg-yellow-300":"bg-yellow-200"," text-black"),children:e||""},s)})})})]},s)})})]})]});return e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Current Half-Season Performance - ",y().description]}),(0,a.jsxs)("div",{className:"hidden md:flex gap-8",children:[(0,a.jsx)("div",{className:"flex-1",children:f()}),(0,a.jsx)("div",{className:"flex-1",children:N()})]}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)(h,{value:u,onValueChange:p,children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{triggerValue:"performance",children:"Points"}),(0,a.jsx)(m,{triggerValue:"goals",children:"Goals"})]}),(0,a.jsx)(g,{triggerValue:"performance",children:f()}),(0,a.jsx)(g,{triggerValue:"goals",children:N()})]})})]})},u=()=>{let[e,s]=(0,r.useState)(!0),[t,j]=(0,r.useState)({seasonStats:[],goalStats:[],formData:[]}),[u,p]=(0,r.useState)(2025),[y,f]=(0,r.useState)("performance"),N=(e,s)=>{let t=e/s;return t>.8?"bg-green-600":t>.6?"bg-green-500":t>.4?"bg-green-400":t>.2?"bg-green-300":"bg-green-200"},v=(e,s)=>{let t=e/s;return t>.8?"bg-red-600":t>.6?"bg-red-500":t>.4?"bg-red-400":t>.2?"bg-red-300":"bg-red-200"};(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startDate:"".concat(u,"-01-01"),endDate:"".concat(u,"-12-31")})}),t=await e.json();t.data?j(t.data):console.error("No data received from API"),s(!1)}catch(e){console.error("Error fetching stats:",e),s(!1)}})()},[u]);let b=()=>{let e=Math.max(...t.seasonStats.map(e=>e.wins),1),s=Math.max(...t.seasonStats.map(e=>e.heavy_wins),1),r=Math.max(...t.seasonStats.map(e=>e.clean_sheets),1),h=Math.max(...t.seasonStats.map(e=>e.games_played-e.wins-e.draws),1),x=Math.max(...t.seasonStats.map(e=>e.heavy_losses),1);return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Points Leaderboard"}),(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{children:"Player"}),(0,a.jsx)(o,{className:"text-center",children:"P"}),(0,a.jsx)(o,{className:"text-center",children:"W"}),(0,a.jsx)(o,{className:"text-center",children:"D"}),(0,a.jsx)(o,{className:"text-center",children:"L"}),(0,a.jsx)(o,{className:"text-center",children:"Goals"}),(0,a.jsx)(o,{className:"text-center",children:"Heavy W"}),(0,a.jsx)(o,{className:"text-center",children:"Heavy L"}),(0,a.jsx)(o,{className:"text-center",children:"Clean Sheet"}),(0,a.jsx)(o,{className:"text-center",children:"Win %"}),(0,a.jsx)(o,{className:"text-center",children:"Points"})]})}),(0,a.jsx)(c,{children:t.seasonStats.map((t,l)=>{let n=t.games_played-t.wins-t.draws;return(0,a.jsxs)(i,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"font-medium",children:t.name}),(0,a.jsx)(d,{className:"text-center",children:t.games_played}),(0,a.jsx)(d,{className:"text-center ".concat(N(t.wins,e)),children:t.wins}),(0,a.jsx)(d,{className:"text-center",children:t.draws}),(0,a.jsx)(d,{className:"text-center ".concat(v(n,h)),children:n}),(0,a.jsx)(d,{className:"text-center",children:t.goals}),(0,a.jsx)(d,{className:"text-center ".concat(N(t.heavy_wins,s)),children:t.heavy_wins}),(0,a.jsx)(d,{className:"text-center ".concat(v(t.heavy_losses,x)),children:t.heavy_losses}),(0,a.jsx)(d,{className:"text-center ".concat(N(t.clean_sheets,r)),children:t.clean_sheets}),(0,a.jsxs)(d,{className:"text-center",children:[t.win_percentage,"%"]}),(0,a.jsx)(d,{className:"text-center font-bold",children:t.fantasy_points})]},l)})})]})]})},_=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Goalscoring Leaderboard"}),(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{children:"Player"}),(0,a.jsx)(o,{className:"text-center",children:"Goals"}),(0,a.jsx)(o,{className:"text-center",children:"MPG"})]})}),(0,a.jsx)(c,{children:t.goalStats.map((e,s)=>(0,a.jsxs)(i,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"font-medium",children:e.name}),(0,a.jsx)(d,{className:"text-center",children:e.total_goals}),(0,a.jsx)(d,{className:"text-center ".concat(e.minutes_per_goal<=60?"bg-green-600":e.minutes_per_goal<=90?"bg-green-500":e.minutes_per_goal<=120?"bg-green-300":""),children:e.minutes_per_goal})]},s))})]})]});return e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Overall Season Performance"}),(0,a.jsx)("select",{value:u,onChange:e=>p(Number(e.target.value)),className:"border rounded-md px-3 py-2 bg-white shadow hover:bg-gray-50",children:[2025,2024,2023,2022,2021,2020,2019,2018,2017,2016,2015,2014,2013,2012,2011].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"hidden md:flex gap-8",children:[(0,a.jsx)("div",{className:"flex-1",children:b()}),(0,a.jsx)("div",{className:"flex-1",children:_()})]}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)(h,{value:y,onValueChange:f,children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{triggerValue:"performance",children:"Points"}),(0,a.jsx)(m,{triggerValue:"goals",children:"Goals"})]}),(0,a.jsx)(g,{triggerValue:"performance",children:b()}),(0,a.jsx)(g,{triggerValue:"goals",children:_()})]})})]})},p=()=>{let[e,s]=(0,r.useState)([]),[t,h]=(0,r.useState)(!0),[x,m]=(0,r.useState)({key:"fantasy_points",direction:"desc"});(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/allTimeStats"),t=await e.json();t.data&&s(t.data),h(!1)}catch(e){console.error("Error fetching stats:",e),h(!1)}})()},[]);let g=e=>e>=400?"bg-green-600":e>=300?"bg-green-500":e>=200?"bg-green-400":e>=100?"bg-yellow-200":"",j=e=>e>=300?"bg-green-600":e>=200?"bg-green-500":e>=100?"bg-green-400":e>=50?"bg-yellow-200":"",u=e=>e<=60?"bg-green-600":e<=90?"bg-green-500":e<=120?"bg-green-400":"",p=t=>{let a="desc";x.key===t&&"desc"===x.direction&&(a="asc"),m({key:t,direction:a}),s([...e].sort((e,s)=>{if(null===e[t]||void 0===e[t])return 1;if(null===s[t]||void 0===s[t])return -1;if(t.includes("percentage")){let r=parseFloat(e[t]),l=parseFloat(s[t]);return"asc"===a?r>l?1:r<l?-1:0:r<l?1:r>l?-1:0}let r="string"==typeof e[t]?e[t].toLowerCase():e[t],l="string"==typeof s[t]?s[t].toLowerCase():s[t];return"asc"===a?r>l?1:r<l?-1:0:r<l?1:r>l?-1:0}))},y=e=>x.key===e?(0,a.jsx)("span",{className:"ml-2 inline-block text-xs font-bold",children:"desc"===x.direction?"▼":"▲"}):null;return t?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"All-Time Stats"}),(0,a.jsx)("div",{className:"max-h-[calc(100vh-200px)] border rounded-lg",children:(0,a.jsx)("div",{className:"relative overflow-auto",children:(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{onClick:()=>p("name"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center",children:["Player ",y("name")]})}),(0,a.jsx)(o,{onClick:()=>p("games_played"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["P ",y("games_played")]})}),(0,a.jsx)(o,{onClick:()=>p("wins"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["W ",y("wins")]})}),(0,a.jsx)(o,{onClick:()=>p("draws"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["D ",y("draws")]})}),(0,a.jsx)(o,{onClick:()=>p("losses"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["L ",y("losses")]})}),(0,a.jsx)(o,{onClick:()=>p("goals"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Goals ",y("goals")]})}),(0,a.jsx)(o,{onClick:()=>p("win_percentage"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Win % ",y("win_percentage")]})}),(0,a.jsx)(o,{onClick:()=>p("minutes_per_goal"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["MPG ",y("minutes_per_goal")]})}),(0,a.jsx)(o,{onClick:()=>p("heavy_wins"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Heavy W ",y("heavy_wins")]})}),(0,a.jsx)(o,{onClick:()=>p("heavy_win_percentage"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Heavy W % ",y("heavy_win_percentage")]})}),(0,a.jsx)(o,{onClick:()=>p("heavy_losses"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Heavy L ",y("heavy_losses")]})}),(0,a.jsx)(o,{onClick:()=>p("heavy_loss_percentage"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Heavy L % ",y("heavy_loss_percentage")]})}),(0,a.jsx)(o,{onClick:()=>p("clean_sheets"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Clean Sheets ",y("clean_sheets")]})}),(0,a.jsx)(o,{onClick:()=>p("clean_sheet_percentage"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Clean Sheet % ",y("clean_sheet_percentage")]})}),(0,a.jsx)(o,{onClick:()=>p("fantasy_points"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["Points ",y("fantasy_points")]})}),(0,a.jsx)(o,{onClick:()=>p("points_per_game"),className:"sticky top-0 bg-white z-10 cursor-pointer hover:bg-gray-50 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center",children:["PPG ",y("points_per_game")]})})]})}),(0,a.jsx)(c,{children:e.map((e,s)=>{let t=e.is_retired,r=t?"".concat(e.name," (r)"):e.name;return(0,a.jsxs)(i,{children:[(0,a.jsx)(d,{className:"font-medium ".concat(t?"text-red-600":""),children:r}),(0,a.jsx)(d,{className:"text-center ".concat(g(e.games_played)),children:e.games_played}),(0,a.jsx)(d,{className:"text-center",children:e.wins}),(0,a.jsx)(d,{className:"text-center",children:e.draws}),(0,a.jsx)(d,{className:"text-center",children:e.losses}),(0,a.jsx)(d,{className:"text-center ".concat(j(e.goals)),children:e.goals}),(0,a.jsxs)(d,{className:"text-center",children:[e.win_percentage,"%"]}),(0,a.jsx)(d,{className:"text-center ".concat(u(e.minutes_per_goal)),children:e.minutes_per_goal}),(0,a.jsx)(d,{className:"text-center",children:e.heavy_wins}),(0,a.jsxs)(d,{className:"text-center",children:[e.heavy_win_percentage,"%"]}),(0,a.jsx)(d,{className:"text-center",children:e.heavy_losses}),(0,a.jsxs)(d,{className:"text-center",children:[e.heavy_loss_percentage,"%"]}),(0,a.jsx)(d,{className:"text-center",children:e.clean_sheets}),(0,a.jsxs)(d,{className:"text-center",children:[e.clean_sheet_percentage,"%"]}),(0,a.jsx)(d,{className:"text-center font-bold",children:e.fantasy_points}),(0,a.jsx)(d,{className:"text-center",children:e.points_per_game})]},s)})})]})})})]})},y=()=>{let[e,s]=(0,r.useState)(!0),[t,j]=(0,r.useState)({seasonWinners:[],topScorers:[],records:null}),[u,p]=(0,r.useState)("seasonal");(0,r.useEffect)(()=>{(async()=>{try{let n=await fetch("/api/honourroll"),c=await n.json();if(c.data){var e,t,a,r,l;let s=null===(e=c.data.records[0])||void 0===e?void 0:e.records,n={...c.data,records:{consecutive_goals:null==s?void 0:s.consecutive_goals,most_goals_in_game:null==s?void 0:s.most_goals_in_game,streaks:{"Win Streak":null==s?void 0:null===(t=s.streaks)||void 0===t?void 0:t["Win Streak"],"Loss Streak":null==s?void 0:null===(a=s.streaks)||void 0===a?void 0:a["Loss Streak"],"No Win Streak":null==s?void 0:null===(r=s.streaks)||void 0===r?void 0:r["No Win Streak"],"Undefeated Streak":null==s?void 0:null===(l=s.streaks)||void 0===l?void 0:l["Undefeated Streak"]}}};j(n)}s(!1)}catch(e){console.error("Error fetching honour roll:",e),s(!1)}})()},[]);let y=()=>(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Season Winners"}),(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{children:"Year"}),(0,a.jsx)(o,{children:"Champion"}),(0,a.jsx)(o,{children:"Points"}),(0,a.jsx)(o,{children:"Runners Up"}),(0,a.jsx)(o,{children:"Top Scorer"}),(0,a.jsx)(o,{children:"Goals"})]})}),(0,a.jsx)(c,{children:t.seasonWinners.map(e=>{var s,r;let l=null===(s=t.topScorers.find(s=>s.year===e.year))||void 0===s?void 0:s.scorers;return(0,a.jsxs)(i,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"font-medium",children:e.year}),(0,a.jsx)(d,{className:"font-bold",children:e.winners.winner}),(0,a.jsx)(d,{children:e.winners.winner_points}),(0,a.jsx)(d,{children:null===(r=e.winners.runners_up)||void 0===r?void 0:r.map(e=>"".concat(e.name," (").concat(e.points,")")).join(", ")}),(0,a.jsx)(d,{className:"font-bold",children:null==l?void 0:l.winner}),(0,a.jsx)(d,{children:null==l?void 0:l.winner_goals})]},e.year)})})]})]}),f=()=>{let e=e=>e.map(e=>e.name).join(", ");return(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"TNF Records"}),(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{children:"Record"}),(0,a.jsx)(o,{children:"Player(s)"}),(0,a.jsx)(o,{children:"Details"}),(0,a.jsx)(o,{children:"Date"})]})}),(0,a.jsx)(c,{children:t.records&&(0,a.jsxs)(a.Fragment,{children:[t.records.most_goals_in_game&&(0,a.jsxs)(i,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"font-medium",children:"Most Goals in a Game"}),(0,a.jsx)(d,{className:"font-bold",children:e(t.records.most_goals_in_game)}),(0,a.jsxs)(d,{children:[t.records.most_goals_in_game[0].goals," goals"]}),(0,a.jsx)(d,{children:t.records.most_goals_in_game.map((e,s)=>(0,a.jsxs)("div",{children:[e.name,": ",new Date(e.date).toLocaleDateString()]},s))})]}),Object.entries(t.records.streaks||{}).map(s=>{let[t,r]=s;return(0,a.jsxs)(i,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"font-medium",children:"Win Streak"===t?"Longest Win Streak":"Loss Streak"===t?"Longest Losing Streak":"No Win Streak"===t?"Longest Streak Without a Win":"Longest Undefeated Streak"}),(0,a.jsx)(d,{className:"font-bold",children:e(r.holders)}),(0,a.jsxs)(d,{children:[r.holders[0].streak," games"]}),(0,a.jsx)(d,{children:r.holders.map((e,s)=>(0,a.jsxs)("div",{children:[e.name,": ",new Date(e.start_date).toLocaleDateString()," - "," ",new Date(e.end_date).toLocaleDateString()]},s))})]},t)}),t.records.consecutive_goals&&(0,a.jsxs)(i,{className:"hover:bg-gray-50",children:[(0,a.jsx)(d,{className:"font-medium",children:"Most Consecutive Games Scoring"}),(0,a.jsx)(d,{className:"font-bold",children:e(t.records.consecutive_goals.holders)}),(0,a.jsxs)(d,{children:[t.records.consecutive_goals.holders[0].streak," games"]}),(0,a.jsx)(d,{children:t.records.consecutive_goals.holders.map((e,s)=>(0,a.jsxs)("div",{children:[e.name,": ",new Date(e.start_date).toLocaleDateString()," - "," ",new Date(e.end_date).toLocaleDateString()]},s))})]})]})})]})]})};return e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Hall of Fame"}),(0,a.jsxs)("div",{className:"hidden md:flex flex-col gap-8",children:[y(),f()]}),(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsxs)(h,{value:u,onValueChange:p,children:[(0,a.jsxs)(x,{children:[(0,a.jsx)(m,{triggerValue:"seasonal",children:"Season Honours"}),(0,a.jsx)(m,{triggerValue:"records",children:"Records"})]}),(0,a.jsx)(g,{triggerValue:"seasonal",children:y()}),(0,a.jsx)(g,{triggerValue:"records",children:f()})]})})]})};var f=t(58581),N=t(28064),v=t(15255),b=t(12800),_=t(66963),w=t(27112),k=t(86354),S=t(14969);let C=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"border rounded-lg shadow-sm p-4",children:s})},P=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"border-b pb-2 mb-4",children:s})},L=e=>{let{children:s}=e;return(0,a.jsx)("h2",{className:"text-xl font-semibold",children:s})},D=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"mt-4",children:s})},G=e=>{let{id:s}=e,[t,h]=(0,r.useState)(null),[x,m]=(0,r.useState)(!0),[g,j]=(0,r.useState)(null),[u,p]=(0,r.useState)(null),[y,G]=(0,r.useState)("Games Played"),[E,W]=(0,r.useState)(s),[A,F]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/players"),s=await e.json();if(s.data){let e=s.data.filter(e=>!e.is_ringer);F(e)}}catch(e){j("Failed to fetch players")}})()},[]),(0,r.useEffect)(()=>{let e=async()=>{try{m(!0);let e=await fetch("/api/playerprofile?id=".concat(E));if(!e.ok)throw Error("Failed to fetch profile: ".concat(e.statusText));let s=await e.json();if(s&&s.profile){let e={...s.profile,yearly_stats:s.profile.yearly_stats||[]};h(e),e.yearly_stats.length>0&&p(e.yearly_stats[0].year)}else throw Error("Invalid data structure: profile not found in response")}catch(e){console.error("Error fetching profile:",e),j(e.message)}finally{m(!1)}};E&&e()},[E]);let V=e=>e>=5?"text-green-600":e>=3?"text-green-500":e>=2?"text-yellow-500":"text-gray-600",M=null==t?void 0:t.yearly_stats.map(e=>{let s=60*e.games_played/(e.goals_scored||1),t=e.fantasy_points/(e.games_played||1);return{year:e.year.toString(),games_played:e.games_played||0,goals_scored:e.goals_scored||0,minutes_per_goal:s||0,points_per_game:t||0,fantasy_points:e.fantasy_points||0}}).reverse();return(null==t||t.yearly_stats.find(e=>e.year===u),x)?(0,a.jsx)("div",{className:"flex justify-center items-center h-64",children:"Loading..."}):g?(0,a.jsxs)("div",{className:"text-red-500",children:["Error: ",g]}):t&&t.yearly_stats?Array.isArray(t.yearly_stats)&&0!==t.yearly_stats.length?(0,a.jsxs)("div",{className:"space-y-6 p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("label",{htmlFor:"player-select",className:"block text-sm font-medium text-gray-700",children:"Select Player"}),(0,a.jsx)("select",{id:"player-select",value:E,onChange:e=>W(Number(e.target.value)),className:"block w-48 px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:Array.isArray(A)&&A.length>0?A.map(e=>(0,a.jsx)("option",{value:e.player_id,children:e.name},e.player_id)):(0,a.jsx)("option",{value:"",children:"No players available"})})]}),(0,a.jsxs)(C,{children:[(0,a.jsx)(P,{children:(0,a.jsxs)(L,{children:[t.name,"'s Profile"]})}),(0,a.jsx)(D,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Games Played"}),(0,a.jsx)("p",{className:"text-2xl",children:t.games_played})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Fantasy Points"}),(0,a.jsx)("p",{className:"text-2xl",children:t.fantasy_points})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Most Goals in a Game"}),(0,a.jsx)("p",{className:"text-2xl",children:t.most_goals}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.most_goals_date})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Longest Win Streak"}),(0,a.jsxs)("p",{className:"text-2xl ".concat(V(t.win_streak)),children:[t.win_streak," games"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.win_streak_dates})]}),(0,a.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Longest Undefeated Streak"}),(0,a.jsxs)("p",{className:"text-2xl ".concat(V(t.undefeated_streak)),children:[t.undefeated_streak," games"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t.undefeated_streak_dates})]})]})})]}),(0,a.jsxs)(C,{children:[(0,a.jsx)(P,{children:(0,a.jsx)(L,{children:"Performance Over Time"})}),(0,a.jsxs)(D,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("label",{htmlFor:"stat-select",className:"block text-sm font-medium text-gray-700",children:"Select Stat to Display"}),(0,a.jsx)("select",{id:"stat-select",value:y,onChange:e=>G(e.target.value),className:"block w-48 px-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:["Games Played","Goals Scored","Minutes Per Goal","Points per Game","Fantasy Points"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsx)("div",{className:"h-96 w-full",children:(0,a.jsx)(f.u,{width:"100%",height:"100%",children:(0,a.jsxs)(N.E,{data:M,margin:{top:20,right:30,left:20,bottom:5},children:[(0,a.jsx)(v.d,{strokeDasharray:"3 3"}),(0,a.jsx)(b.W,{dataKey:"year"}),(0,a.jsx)(_.h,{}),(0,a.jsx)(w.m,{}),(0,a.jsx)(k.s,{}),(0,a.jsx)(S.y,{dataKey:y.toLowerCase().replace(/ /g,"_"),fill:"#8884d8"})]})})})]})]}),(0,a.jsxs)(C,{children:[(0,a.jsx)(P,{children:(0,a.jsx)(L,{children:"Yearly Statistics"})}),(0,a.jsx)(D,{children:(0,a.jsxs)(l,{children:[(0,a.jsx)(n,{children:(0,a.jsxs)(i,{children:[(0,a.jsx)(o,{children:"Year"}),(0,a.jsx)(o,{className:"text-right",children:"Games"}),(0,a.jsx)(o,{className:"text-right",children:"Goals"}),(0,a.jsx)(o,{className:"text-right",children:"Mins/Goal"}),(0,a.jsx)(o,{className:"text-right",children:"Points/Game"}),(0,a.jsx)(o,{className:"text-right",children:"Fantasy Points"})]})}),(0,a.jsx)(c,{children:t.yearly_stats.map(e=>{let s=60*e.games_played/(e.goals_scored||1),t=e.fantasy_points/(e.games_played||1);return(0,a.jsxs)(i,{className:u===e.year?"bg-gray-100":"",onClick:()=>p(e.year),style:{cursor:"pointer"},children:[(0,a.jsx)(d,{children:e.year}),(0,a.jsx)(d,{className:"text-right",children:e.games_played}),(0,a.jsx)(d,{className:"text-right",children:e.goals_scored}),(0,a.jsx)(d,{className:"text-right",children:s.toFixed(1)}),(0,a.jsx)(d,{className:"text-right",children:t.toFixed(1)}),(0,a.jsx)(d,{className:"text-right",children:e.fantasy_points})]},e.year)})})]})})]})]}):(0,a.jsx)("div",{children:"No yearly stats available"}):(0,a.jsx)("div",{children:"No profile data found"})};var E=t(77711);let W=(0,E.default)(()=>t.e(771).then(t.bind(t,76771)),{loadableGenerated:{webpack:()=>[76771]},ssr:!1}),A=(0,E.default)(()=>Promise.all([t.e(253),t.e(505)]).then(t.bind(t,89505)),{loadableGenerated:{webpack:()=>[89505]},ssr:!1}),F=()=>{let[e,s]=(0,r.useState)(null);return(0,a.jsx)("div",{className:"p-6",children:e?(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>s(null),className:"mb-4 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-blue-500 transition-all",children:"Back to Admin Menu"}),"players"===e&&(0,a.jsx)(W,{}),"matches"===e&&(0,a.jsx)(A,{})]}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Admin Panel"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("div",{onClick:()=>s("players"),className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-blue-500 hover:to-green-500 transition-all",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Add or Amend Players"})}),(0,a.jsx)("div",{onClick:()=>s("matches"),className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-pink-500 hover:to-purple-500 transition-all",children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Enter Match Information"})})]})]})})};console.log("AdminLayoutComponent file is being loaded");let V=e=>{let{children:s}=e,[t,l]=(0,r.useState)(!1),[n,c]=(0,r.useState)(""),[i,o]=(0,r.useState)("");return((0,r.useEffect)(()=>{"true"===localStorage.getItem("adminAuth")&&l(!0)},[]),t)?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-24",children:(0,a.jsxs)("div",{className:"w-full max-w-md p-6 bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Admin Access"}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"poo"===n?(localStorage.setItem("adminAuth","true"),l(!0),o("")):o("Invalid password")},className:"space-y-4",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"password",value:n,onChange:e=>c(e.target.value),placeholder:"Enter password",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),i&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:i}),(0,a.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-blue-500 transition-all",children:"Login"})]})]})})};function M(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)(null),n=e=>{console.log("Setting selected player ID:",e),l(e),s("player-profiles")};return console.log("Current view:",e),console.log("Selected player ID:",t),(0,a.jsx)("main",{children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{s(""),l(null)},className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg shadow-md hover:from-purple-600 hover:to-blue-500 transition-all",children:"Back to Home"}),"current-half"===e&&(0,a.jsx)(j,{}),"season"===e&&(0,a.jsx)(u,{}),"all-time"===e&&(0,a.jsx)(p,{}),"honour-roll"===e&&(0,a.jsx)(y,{}),"player-profiles"===e&&(0,a.jsx)(G,{id:t}),"admin"===e&&(0,a.jsx)(V,{children:(0,a.jsx)(F,{})})]}):(0,a.jsxs)("div",{className:"flex min-h-screen flex-col items-center p-24",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-6",children:"Berko TNF Stats"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 text-white hover:from-yellow-500 hover:to-pink-500 transition-all",onClick:()=>s("current-half"),children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Current Half-Season"})}),(0,a.jsx)("div",{className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-purple-600 hover:to-blue-500 transition-all",onClick:()=>s("season"),children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Performance by Season"})}),(0,a.jsx)("div",{className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-purple-600 hover:to-blue-500 transition-all",onClick:()=>s("all-time"),children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"All-Time Leaderboard"})}),(0,a.jsx)("div",{className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-purple-600 hover:to-blue-500 transition-all",onClick:()=>s("honour-roll"),children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Hall of Fame"})}),(0,a.jsx)("div",{className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-purple-600 hover:to-blue-500 transition-all",onClick:()=>n(1),children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Individual Player Profiles"})}),(0,a.jsx)("div",{className:"p-6 rounded-lg shadow cursor-pointer bg-gradient-to-r from-green-500 to-blue-500 text-white hover:from-blue-500 hover:to-green-500 transition-all",onClick:()=>s("admin"),children:(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Admin Section"})})]})]})})}console.log("Type of AdminLayout:",typeof V),console.log("AdminPanel:",F),console.log("AdminLayout:",V)}},e=>{var s=s=>e(e.s=s);e.O(0,[40,441,517,358],()=>s(14584)),_N_E=e.O()}]);