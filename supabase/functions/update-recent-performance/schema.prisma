generator client {
  provider = "prisma-client-js"
  output   = "./generated"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model players {
  player_id    Int    @id
  is_ringer    Boolean
  is_retired   Boolean
}

model player_matches {
  id           Int     @id @default(autoincrement())
  player_id    Int
  team         String?
  goals        Int?
  result       String?
  heavy_win    Boolean?
  heavy_loss   Boolean?

  match_id     Int?
  matches      matches? @relation(fields: [match_id], references: [id])
}

model matches {
  id            Int    @id @default(autoincrement())
  match_date    DateTime
  team_a_score  Int
  team_b_score  Int

  player_matches player_matches[]   // ðŸ‘ˆ ðŸ‘ˆ ADD THIS to fix the relation!
}

model aggregated_recent_performance {
  id             Int    @id @default(autoincrement())
  player_id      Int
  last_5_goals   Int
  last_5_games   Json
  last_updated   DateTime
}